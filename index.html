<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>דף ניהול - קבוצת עדן דוד בע"מ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #f5f5f5;
      font-family: Arial, sans-serif;
      display: flex;
    }

    .sidebar {
      width: 250px;
      background-color: #1f2235;
      color: white;
      min-height: 100vh;
      padding-top: 1rem;
    }

    .sidebar h4 {
      text-align: center;
      margin-bottom: 2rem;
    }

    .sidebar ul {
      list-style: none;
      padding: 0;
    }

    .sidebar ul li {
      padding: 10px 20px;
      border-bottom: 1px solid #343a40;
    }

    .sidebar ul li a {
      color: white;
      text-decoration: none;
      display: block;
    }

    .sidebar ul li:hover {
      background-color: #343a40;
    }

    .content {
      flex-grow: 1;
      padding: 2rem;
    }

    .stat-card {
      background-color: #2c2f48;
      color: white;
      text-align: center;
      padding: 15px;
      border-radius: 8px;
      font-size: 0.9rem;
    }

    .stat-value {
      font-size: 1.2rem;
      font-weight: bold;
    }

    .scroll-table {
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
  <!-- <link href="assets/css/styles.css" rel="stylesheet"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <script src="assets/js/scripts.js" defer></script>
</head>

<body>
  <div class="sidebar">
    <h4><a href="index.html" class="text-white text-decoration-none">עדן דוד בע"מ</a></h4>
    <ul>
      <!-- קבוצה 1 -->
      <li><a href="new-orders.html">הזמנות חדשות</a></li>
      <li><a href="orders-in-progress.html">הזמנות בטיפול</a></li>
      <li><a href="error-orders.html">הזמנות שגויות</a></li>
      <li><a href="shipments.html">משלוחים</a></li>
      <li><a href="customer-service.html" class="nav-link">שירות לקוחות</a></li>
      <hr>
      <!-- קבוצה 2 -->
      <li><a href="import-orders.html">יבוא הזמנות</a></li>
      <li><a href="email-orders.html">קבצים נכנסים</a></li>
      <li><a href="accounting.html">הנהלת חשבונות</a></li>
      <li><a href="reports.html">דוחות</a></li>
      <hr>
      <!-- קבוצה 3 -->
      <li><a href="products.html">מוצרים</a></li>
      <li><a href="promotions.html">מבצעים</a></li>
      <li><a href="deals.html">עסקאות</a></li>
      <hr>
      <!-- קבוצה 4 -->
      <li><a href="clients.html">לקוחות</a></li>
      <li><a href="settings.html">הגדרות</a></li>
      <hr>
      <!-- קבוצה 5 -->
      <li><a href="import-products.html">יבוא מוצרים</a></li>
      <li><a href="orders-history.html">היסטוריית הזמנות</a></li>
    </ul>
  </div>
  <!-- <script>
    window.addEventListener('load', function () {
      fetch('includes/toolbar.html')
        .then(response => response.text())
        .then(html => {
          const content = document.querySelector('.content');
          if (content) {
            content.insertAdjacentHTML('afterbegin', html); // Insert at start of content
          } else {
            document.body.insertAdjacentHTML('afterbegin', html); // Fallback for pages without content class
          }
        })
        .catch(error => console.error('Error loading toolbar:', error));
    });
  </script> -->
  <div class="content">
    <div class="container-fluid">
      <div class="row g-2 mb-4">
        <div class="col-2">
          <div class="stat-card">
            <div>הזמנות</div>
            <div class="stat-value">41</div>
          </div>
        </div>
        <div class="col-2">
          <div class="stat-card">
            <div>הכנסות (החודש)</div>
            <div class="stat-value">₪35,810.00</div>
          </div>
        </div>
        <div class="col-2">
          <div class="stat-card">
            <div>פריטים</div>
            <div class="stat-value">255</div>
          </div>
        </div>
        <div class="col-3">
          <div class="stat-card">
            <div>עומד להיגמר</div>
            <div class="stat-value">14</div>
          </div>
        </div>
        <div class="col-3">
          <div class="stat-card">
            <div>אזל מהמלאי</div>
            <div class="stat-value">132</div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div class="card-header bg-secondary text-white">50 המוצרים הנמכרים ביותר</div>
            <div class="card-body scroll-table">
              <table class="table">
                <thead>
                  <tr>
                    <th>שם מוצר</th>
                    <th>מחיר</th>
                    <th>תאריך</th>
                    <th>סטטוס</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>מצנן 5500 ARPO</td>
                    <td>₪1,380</td>
                    <td>03/07/2025</td>
                    <td><span class="badge bg-success">שולם</span></td>
                  </tr>
                  <tr>
                    <td>אוהל PVC</td>
                    <td>₪960</td>
                    <td>02/07/2025</td>
                    <td><span class="badge bg-success">שולם</span></td>
                  </tr>
                  <tr>
                    <td>שולחן פעילות</td>
                    <td>₪690</td>
                    <td>01/07/2025</td>
                    <td><span class="badge bg-success">שולם</span></td>
                  </tr>
                  <tr>
                    <td>מוצר 4</td>
                    <td>₪500</td>
                    <td>30/06/2025</td>
                    <td><span class="badge bg-warning">בטיפול</span></td>
                  </tr>
                  <tr>
                    <td>מוצר 5</td>
                    <td>₪300</td>
                    <td>29/06/2025</td>
                    <td><span class="badge bg-danger">לא זמין</span></td>
                  </tr>
                  <tr>
                    <td>מיקרוגל 800W</td>
                    <td>₪450</td>
                    <td>28/06/2025</td>
                    <td><span class="badge bg-success">שולם</span></td>
                  </tr>
                  <tr>
                    <td>ספה נפתחת</td>
                    <td>₪1,200</td>
                    <td>27/06/2025</td>
                    <td><span class="badge bg-info">ממתין לאישור</span></td>
                  </tr>
                  <tr>
                    <td>טוסטר אובן</td>
                    <td>₪350</td>
                    <td>26/06/2025</td>
                    <td><span class="badge bg-success">שולם</span></td>
                  </tr>
                  <tr>
                    <td>שטיח סלון</td>
                    <td>₪750</td>
                    <td>25/06/2025</td>
                    <td><span class="badge bg-warning">בטיפול</span></td>
                  </tr>
                  <tr>
                    <td>מקרר 300L</td>
                    <td>₪2,000</td>
                    <td>24/06/2025</td>
                    <td><span class="badge bg-danger">לא זמין</span></td>
                  </tr>
                  <tr>
                    <td>כסא משרדי</td>
                    <td>₪400</td>
                    <td>23/06/2025</td>
                    <td><span class="badge bg-success">שולם</span></td>
                  </tr>
                  <tr>
                    <td>מנורה LED</td>
                    <td>₪150</td>
                    <td>22/06/2025</td>
                    <td><span class="badge bg-info">ממתין לאישור</span></td>
                  </tr>
                  <tr>
                    <td>שולחן קפה</td>
                    <td>₪600</td>
                    <td>21/06/2025</td>
                    <td><span class="badge bg-warning">בטיפול</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="col-md-12 mt-3">
          <div class="card">
            <div class="card-header bg-secondary text-white">דוח לקוח חודשי</div>
            <div class="card-body d-flex justify-content-center">
              <div id="chartWrapper" style="width: 100%; max-width: 1200px; min-width: 400px; overflow-x: auto;">
                <canvas id="customerChart" height="400"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const labels = [
        'Boxmaster', 'Pro-Tools', 'מועדון טוב', 'מחסני חשמל', 'סופר-פארם', 'קונימבו', 'לקוח ידני',
        'חנות A', 'חנות B', 'חנות C', 'חנות D', 'חנות E', 'חנות F', 'חנות G', 'חנות H',
        'חנות I', 'חנות J', 'חנות K', 'חנות L', 'חנות M', 'חנות N', 'חנות O', 'חנות P',
        'חנות Q', 'חנות R', 'חנות S', 'חנות T', 'חנות U', 'חנות V'
      ];

      const data = [
        13800, 27650, 7500, 12600, 50500, 240000, 1000000,
        45000, 78000, 32000, 59000, 110000, 23000, 87000, 150000,
        42000, 31500, 12800, 67000, 21500, 54000, 29000, 99000,
        61000, 84000, 34000, 73000, 18500, 49000, 102000
      ];

      const canvas = document.getElementById('customerChart');
      canvas.style.width = (labels.length * 100) + 'px'; // 100px per label for spacing

      const ctx = canvas.getContext('2d');

      const chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: 'סה״כ רכישות',
            data: data,
            borderColor: 'rgba(75, 192, 192, 1)',
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            fill: true,
            tension: 0.4,
            pointRadius: 5
          }]
        },
        options: {
          responsive: false,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false }
          },
          scales: {
            x: {
              title: { display: true, text: 'לקוחות' },
              ticks: {
                autoSkip: false,
                maxRotation: 0,
                minRotation: 0
              }
            },
            y: {
              beginAtZero: true,
              ticks: {
                callback: function (value) {
                  if (value >= 1000000) return '1M';
                  if (value >= 1000) return value.toLocaleString();
                  return value;
                }
              },
              suggestedMax: 1100000
            }
          }
        }
      });

      // Optional: scroll to left (show Y-axis)
      document.getElementById('chartWrapper')?.scrollTo({ left: 0 });
    </script>


</body>

</html>