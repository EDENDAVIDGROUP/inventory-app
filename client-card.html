<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×›×¨×˜×™×¡ ×œ×§×•×—</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: Arial, sans-serif;
      padding: 30px;
    }
    h2 {
      margin-bottom: 20px;
    }
    .section-title {
      margin-top: 30px;
      margin-bottom: 15px;
      font-weight: bold;
      font-size: 1.2rem;
    }
    .form-section {
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .log-box {
      background: #f1f1f1;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 5px;
      max-height: 150px;
      overflow-y: auto;
      font-size: 0.9rem;
    }
    .top-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="top-actions">
      <a href="index.html" class="btn btn-outline-dark">ğŸ  ×“×£ ×”×‘×™×ª</a>
      <a href="clients.html" class="btn btn-outline-secondary">â†© ×—×–×¨×” ×œ×¨×©×™××ª ×œ×§×•×—×•×ª</a>
      <button class="btn btn-outline-primary" onclick="window.print()">ğŸ–¨ï¸ ×”×“×¤×¡</button>
    </div>

    <h2 id="clientTitle">×›×¨×˜×™×¡ ×œ×§×•×—</h2>

    <div class="form-section">
      <div class="section-title">×¤×¨×˜×™ ×¢×‘×•×“×” ××•×œ ×”×œ×§×•×—</div>
      <div class="row mb-3">
        <div class="col-md-6">
          <label>×¡×•×’ ×—×™×‘×•×¨ ×œ×”×–×× ×•×ª</label>
          <select id="orderMethod" class="form-select">
            <option>API</option>
            <option>××§×¡×œ ×‘××™×™×œ</option>
            <option>PDF ×‘××™×™×œ</option>
            <option>××—×™×¨ ×™×“× ×™</option>
          </select>
        </div>
        <div class="col-md-6">
          <label>×¡×•×’ ××—×™×¨</label>
          <select id="priceType" class="form-select" onchange="toggleDiscount()">
            <option>××—×™×¨ ×¡×•×¤×™</option>
            <option>××—×™×¨ ×œ×¦×¨×›×Ÿ - ×’×–×•×¨ ××× ×• ×¢××œ×”</option>
          </select>
        </div>
      </div>
      <div class="row mb-3" id="discountSection" style="display:none">
        <div class="col-md-6">
          <label>××—×•×– ×¢××œ×” (%)</label>
          <input type="number" id="discountPercent" class="form-control">
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-6">
          <label>×”×× ×”××—×™×¨ ×›×•×œ×œ ××©×œ×•×—?</label>
          <select id="includesShipping" class="form-select">
            <option>×›×Ÿ</option>
            <option>×œ× â€“ ×œ×”×•×¡×™×£ ×¢×œ×•×ª</option>
          </select>
        </div>
        <div class="col-md-6">
          <label>×”×× ×œ×©×“×¨ ××•×˜×•××˜×™×ª ×œ×¦'×™×˜×”?</label>
          <select id="autoSendShipping" class="form-select">
            <option>×œ×</option>
            <option>×›×Ÿ</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section mt-4">
      <div class="section-title">×”×’×“×¨×•×ª ×”× ×”×œ×ª ×—×©×‘×•× ×•×ª</div>
      <div class="row mb-3">
        <div class="col-md-6">
          <label>×¡×•×’ ×—×©×‘×•× ×™×ª</label>
          <select id="invoiceType" class="form-select">
            <option>×—×©×‘×•× ×™×ª ××¡</option>
            <option>×ª×¢×•×“×ª ××©×œ×•×—</option>
            <option>×”×–×× ×”</option>
            <option>×—×©×‘×•× ×™×ª ××¨×•×›×–×ª</option>
            <option>××™×Ÿ ×—×©×‘×•× ×™×ª</option>
          </select>
        </div>
        <div class="col-md-6">
          <label>×¢×™×ª×•×™ ×”×”×¤×§×”</label>
          <select id="invoiceTiming" class="form-select">
            <option>×œ×›×œ ×”×–×× ×”</option>
            <option>×¡×•×£ ×—×•×“×©</option>
          </select>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-6">
          <label>×”×× ×œ×¤×¦×œ ×©×•×¨×ª ××©×œ×•×— ×œ×—×©×‘×•× ×™×ª × ×¤×¨×“×ª?</label>
          <select id="splitShippingLine" class="form-select">
            <option>×œ×</option>
            <option>×›×Ÿ</option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-section mt-4">
      <div class="section-title">×¤×¨×˜×™ ×œ×§×•×— ×›×œ×œ×™×™×</div>
      <div class="row mb-3">
        <div class="col-md-4">
          <label>×˜×œ×¤×•×Ÿ</label>
          <input type="text" id="clientPhone" class="form-control">
        </div>
        <div class="col-md-4">
          <label>××™××™×™×œ</label>
          <input type="email" id="clientEmail" class="form-control">
        </div>
        <div class="col-md-4">
          <label>××¡×¤×¨ ×¢×•×¡×§ / ×—.×¤</label>
          <input type="text" id="clientVat" class="form-control">
        </div>
      </div>
    </div>

    <div class="form-section mt-4">
      <div class="section-title">××¡××š ×”×ª×§×©×¨×•×ª ×¢× ×”×œ×§×•×—</div>
      <input type="file" id="clientAgreement" class="form-control">
    </div>

    <div class="form-section mt-4">
      <div class="section-title">×”×¢×¨×•×ª ×˜×›× ×™×•×ª / ×œ×•×’×™×</div>
      <div class="log-box" id="logBox">
        ğŸŸ¢ ×˜×¢×™× ×ª ×›×¨×˜×™×¡ ×œ×§×•×— ×‘×•×¦×¢×” ×‘×”×¦×œ×—×”.<br>
        ğŸ•’ 13/07/2025 23:38: × ×•×¦×¨ ×›×¨×˜×™×¡ ×—×“×© ×œ×œ×§×•×— ID=0
      </div>
    </div>

    <div class="text-center mt-4">
      <button class="btn btn-success" onclick="saveClientSettings()">ğŸ’¾ ×©××•×¨ ×”×’×“×¨×•×ª</button>
    </div>
  </div>

  <script>
    function toggleDiscount() {
      const priceType = document.getElementById("priceType").value;
      document.getElementById("discountSection").style.display = priceType.includes("×’×–×•×¨") ? "block" : "none";
    }

    function saveClientSettings() {
      const params = new URLSearchParams(window.location.search);
      const clientId = params.get("clientId");
      if (!clientId) return;

      const clients = JSON.parse(localStorage.getItem("clients")) || [];
      const client = clients[clientId];

      if (client) {
        client.orderMethod = document.getElementById("orderMethod").value;
        client.priceType = document.getElementById("priceType").value;
        client.discountPercent = document.getElementById("discountPercent").value;
        client.includesShipping = document.getElementById("includesShipping").value;
        client.autoSendShipping = document.getElementById("autoSendShipping").value;
        client.invoiceType = document.getElementById("invoiceType").value;
        client.invoiceTiming = document.getElementById("invoiceTiming").value;
        client.splitShippingLine = document.getElementById("splitShippingLine").value;
        client.clientPhone = document.getElementById("clientPhone").value;
        client.clientEmail = document.getElementById("clientEmail").value;
        client.clientVat = document.getElementById("clientVat").value;

        localStorage.setItem("clients", JSON.stringify(clients));
        document.getElementById("logBox").innerHTML += `<br>âœ… ×©××™×¨×” ×”×¦×œ×™×—×” ×¢×‘×•×¨ ×œ×§×•×— ID=${clientId}`;
      }
    }

    window.onload = function () {
      const params = new URLSearchParams(window.location.search);
      const clientId = params.get("clientId");
      const clients = JSON.parse(localStorage.getItem("clients")) || [];
      const client = clients[clientId];
      if (client) {
        document.getElementById("clientTitle").innerText = `×›×¨×˜×™×¡ ×œ×§×•×—: ${client.name}`;
      } else {
        document.getElementById("logBox").innerHTML += "<br>ğŸ”´ ×©×’×™××”: ×œ×§×•×— ×œ× × ××¦× ×‘××¢×¨×›×ª.";
      }
    };
  </script>
</body>
</html>
