<!-- Navbar -->
<nav id="mainNavbar" class="navbar navbar-expand-lg fixed-top navbar-light">
  <div class="container">
    <!-- Logo -->
    <a class="navbar-brand fw-bold" href="#">FlexStart</a>

    <!-- Toggle button (for mobile) -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

<!-- Toolbar -->
<nav id="mainNavbar" class="fixed-toolbar navbar navbar-expand-lg fixed-top navbar-light py-2">
  <div class="container d-flex justify-content-between align-items-center">
    <!-- Logo -->
    <a class="navbar-brand fw-bold" href="#">עדן דוד</a>

    <!-- Buttons -->
    <div class="d-flex gap-2 fw-bold">
      <button class="btn btn-outline-dark rounded-pill px-3" onclick="location.href='index.html'">דף הבית</button>
      <button class="btn btn-outline-dark rounded-pill px-3" onclick="window.history.back()">חזור לעמוד קודם</button>
      <button class="btn btn-outline-dark rounded-pill px-3" onclick="saveChanges()">שמור שינויים</button>
      <button class="btn btn-outline-dark rounded-pill px-3" onclick="exportToExcel()">ייצוא לאקסל</button>
      <button class="btn btn-outline-dark rounded-pill px-3" onclick="printPage()">הדפסה</button>
    </div>
  </div>
</nav>





<script>
  function saveChanges() {
    alert("💾 שמירת שינויים (דמו בלבד)");
  }

  function exportToExcel(filename) {
    // Fallback if no data exists
    const rows = (typeof transactions !== "undefined" ? transactions : []);
    if (!rows.length) {
      alert("⚠️ אין נתונים לייצוא");
      return;
    }

    // Default headers
    const headers = ['מספר עסקה', 'מוצר', 'לקוח', 'אינטגרציה', 'תאריך שידור', 'סטטוס', 'סטטוס יעד'];
    const dataRows = rows.map(tx => [
      tx.id, tx.product, tx.customer, tx.integration, tx.date, tx.status, tx.targetStatus
    ]);

    // Build CSV
    const csv = [headers, ...dataRows].map(r => r.join(",")).join("\n");
    const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });

    // Dynamic filename: use page title + date
    const pageTitle = document.title.replace(/\s+/g, "-");
    const today = new Date().toISOString().split("T")[0];
    const exportName = filename || `${pageTitle}-${today}.csv`;

    // Download
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.setAttribute("download", exportName);
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }

  function printPage() {
    window.print();
  }
</script>
